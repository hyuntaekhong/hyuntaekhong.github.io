---
title: "[Java 21] 자바 - 인터페이스(2)"
date: 2020-05-02
categories:
  - blog
tags:
  - Java
comments: true
excerpt: 
last_modified_at: 2020-05-02
toc: true
---

## 학습목표

1. 


## 타입 변환과 다형성

프로그램을 개발할 때 인터페이스를 사용해서 메소드를 호출하도록 코딩을 했다면, 구현 객체를 교체하는 것은 매우 손쉽고 빠르게 할 수 있습니다. 프로그램 소스 코드는 변함이 없는데, 구현 객체를 교체함으로써 프로그램의 실행 결가가 다양해질 수 있습니다. 이것이 인터페이스의 다형성입니다.

### 자동 타입 변환(Promotion)

구현 객체가 인터페이스 타입으로 변환되는 것을 자동 타입 변환이라고 합니다. 인터페이스 구현 클래스를 상속해서 자식 클래스를 만들었다면 자식 객체 역시 인터페이스 타입으로 자동 타입 변환이 가능합니다. 
자동 타입 변환을 이용하면 필드의 다형성과 매개 변수의 다형성을 구현할 수 있습니다. 


![자동타입변환](\assets\images\java\java-basic20\interface03.png)


### 필드의 다형성

자동차의 타이어를 생각해보자. 타이어라는 인터페이스를 통해서 한국타이어와 금호타이어를 구현했다고 한다면 두 타이어는 인터페이스에 있는 메소드를 가지고 있습니다. 즉, 타이어 인터페이스로 동일하게 사용이 가능한 교체 가능한 객체에 해당됩니다.


```java
public class Car {
  Tire frontLeftTire = new HankookTire();
  Tire frontRightTire = new HankookTire();
  Tire backLeftTire = new HankookTire();
  Tire backRightTire = new HankookTire();
}
```

Car 객체를 생성한 후, 초기값으로 대입한 구현 객체 대신 다른 구현 객체를 대입할 수 있습니다.

```java
Car myCar = new Car();
myCar.frontLeftTire = new KumhoTire();
myCar.frontRightTire = new KumhoTire();
```

 frintLeftTire와 frontRightTire를 교체하기 전에는 HankookTire 객체의 roll() 메소드가 호출되지만, KumhoTire 객체로 변경된 이후  KumhoTire 객체의 roll() 메소드가 호출됩니다. 

```java
void run() {
  frontLeftTire.roll();
  frontRightTire.roll();
  backLeftTire.roll();
  backRightTire .roll();
}
```


**예제 1**

[Tire] 인터페이스

```java
public interface Tire {
	public void roll();
}
```

[HankookTire] 구현 클래스

```java
public class HankookTire implements Tire{
	@Override
	public void roll() {
		System.out.println("한국 타이어가 굴러갑니다.");
	}
}
```

[KumhoTire] 구현 클래스

```java
public class KumhoTire implements Tire {
	@Override
	public void roll() {
		System.out.println("금호 타이어가 굴러갑니다.");
	}
}
```

[Car] 필드 다형성

```java
public class Car {
	Tire frontLeftTire = new HankookTire();
	Tire frontRightTire = new HankookTire();
	Tire backLeftTire = new HankookTire();
	Tire backRightTire = new HankookTire();

	void run() {
		frontLeftTire.roll();
		frontRightTire.roll();
		backLeftTire.roll();
		backRightTire.roll();
	}
}
```

[CarMain] 실행 클래스

```java
public class CarMain {
	public static void main(String[] args) {
		Car car = new Car();
		car.run();
		System.out.println();
		
		car.frontLeftTire = new KumhoTire();
		car.frontRightTire = new KumhoTire();
		
		car.run();
		System.out.println();
	}
}
```


### 인터페이스 배열로 구현 객체 관리

위의 예제를 다음과 같이 배열로 관리할 수도 있습니다.

```java
Tire[] tires = {
  new HankookTire(),
  new HankookTire(),
  new HankookTire(),
  new HankookTire()
} 
```

frontLeftTire 는 tires[0], frontRightTire는 tires[1], backLeftTire는 tires[2], backRightTire는 tires[3]과 같이 인덱스로 표현되므로 대입이나 제어문에서 활용하기 쉽습니다. 

```java
tires[1] = new KumhoTire(); // 앞오른쪽 바퀴를 금호타이어로 교체
```

roll() 메소드를 호출하는 Car 클래스의 run()메소드는 다음과 같이 간단하게 작성이 가능해집니다.


```java
void run() {
  for(Tire tire : tires) {
    tire.roll();
  }
}
```


**예제 2**

예제 1을 배열로 변경해서 실행해보겠습니다.

[Car] 필드 다형성
```java
public class Car {
	Tire[] tires = {
			  new HankookTire(),
			  new HankookTire(),
			  new HankookTire(),
			  new HankookTire()
			};
	
	void run() {
		for (Tire tire : tires) {
			tire.roll();
		}
	}
}
```

<br/>

[CarMain] 필드 다형성 실행 클래스

```java
public class CarMain {
	public static void main(String[] args) {
		Car car = new Car();
		car.run();

		car.tires[0] = new KumhoTire();
		car.tires[1] = new KumhoTire();
		car.run();
	}
}
```


### 매개변수의 다형성

매개값을 다양화하기 위해서 상속에서는 매개 변수를 부모 타입으로 선언하고 호출할 때에는 자식 객체를 대입했습니다. 이번에는 매개변수를 인터페이스 타입으로 선언하고 호출할 때는 구현 객체를 대입합니다.

[Driver]
```java
public class Driver() {
  public void drive(Vehicle vehicle) {    //Vehicle 타입의 매개 변수 선언
    vehicle.run();
  }
}
```

[Vehicle] 인터페이스

```java
public interface Vehicle {
  public void run();
}
```

```java
Driver driver = new Driver();

Bus bus = new Bus();

driver.drive( bus );  // 자동 타입 변환 발생 Vehicle vehicle = bus;
```

**예제**

[Driver] 매개 변수의 인터페이스화

```java
public class Driver {
	public void drive(Vehicle vehicle) {
		vehicle.run();
	}
}
```

[Vehicle] 인터페이스

```java
public interface Vehicle {
	public void run();
}
```

[Bus] 구현 클래스

```java
public class Bus implements Vehicle{
	@Override
	public void run() {
		System.out.println("버스가 달립니다. ");
	}
}
```

[Taxi]] 구현 클래스

```java
public class Taxi implements Vehicle {
	@Override 
	public void run() {
		System.out.println("택시가 달립니다."); 
	}
}
```

[DriverMain] 매개 변수의 다형성 실행클래스

```java
public class DriverMain {
	public static void main(String[] args) {
		Driver driver = new Driver();

		Bus bus = new Bus();
		Taxi taxi = new Taxi();

		driver.drive(bus);
		driver.drive(taxi);
	}
}
```
























